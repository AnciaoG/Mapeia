<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mapeia - Home</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <header>
    <nav id="menu">
      <a href="/">Home</a>
      <a href="/equipe">Equipe</a>
      <a href="/projeto">Sobre o Projeto</a>
      <a href="/mapa" id="mapaLink">Mapas</a>
      <img src="/imagens/usuario.png" class="usuario-logo">
    </nav>
  </header>

  <main>
    <div class="logo-container">
      <img src="/imagens/logo-mapeia.png" alt="Logo do Mapeia" class="logo-principal">
    </div>

    <div class="texto-home">
      <h1>Bem-vindo ao Mapeia 🚀</h1>
      <p>
        O Mapeia é um protótipo de Sistema de Informação Geográfica na Web (SIGWeb), 
        criado com o objetivo de apoiar a gestão urbana no município de Coelho Neto (MA). 
        A plataforma foi pensada para reunir e disponibilizar dados sobre alagamentos, 
        segurança pública e tráfego, oferecendo uma forma acessível e interativa de análise 
        e visualização para gestores e cidadãos.
      </p>
      <p>
        O sistema já conta com funcionalidades como consulta espacial, visualização de camadas 
        temáticas e geração de relatórios, possibilitando um primeiro passo importante para o 
        diagnóstico de problemas urbanos. Apesar de ainda estar em fase de desenvolvimento e 
        testes, o Mapeia busca se consolidar como uma ferramenta inovadora para a cidade, 
        com potencial de expansão para integração de dados em tempo real e adaptação a outros municípios.
      </p>

      <section class="map-previews">
  <h2>Prévia dos Mapas</h2>
  <div class="map-preview-grid">
    <!-- Apenas os dois primeiros mapas -->
    <div class="map-preview-item">
      <h3>Mapa de Coelho Neto</h3>
      <iframe src="/mapaFiles/qgis2web_2025_09_20-22_17_46_811048/index.html"></iframe>
    </div>

    <div class="map-preview-item">
      <h3>Mapa do Maranhão</h3>
      <iframe src="/mapaFiles/qgis2web_2025_09_20-22_20_12_291843/index.html"></iframe>
    </div>
  </div>

  <div class="ver-mais-container">
    <a href="/mapa" class="btn-ver-mais">Ver mais mapas</a>
  </div>
</section>


      <p class="importante">
       Importante: este site apresenta um protótipo em construção, sujeito a ajustes e melhorias constantes.
      </p>
    </div>
  </main>

  <footer>
    <img src="/imagens/logo-ifma.png" alt="Logo IFMA" class="footer-logo">
    <img src="/imagens/logo-fapema.png" alt="Logo FAPEMA" class="footer-logo">
    <img src="/imagens/logo-mapeia-pt.png" alt="Logo Mapeia" class="footer-logo logo-mapeia">
  </footer>

  <script>
    fetch("/session")
      .then(res => res.json())
      .then(data => {
        const menu = document.getElementById("menu");
        const mapaLink = document.getElementById("mapaLink");

        if (!data.logged) {
          // Bloqueia clique no mapa e leva para login
          mapaLink.addEventListener("click", e => {
            e.preventDefault();
            window.location.href = "/login?error=É necessário estar logado para acessar os mapas";
          });

          // Adiciona login
          const login = document.createElement("a");
          login.href = "/login";
          login.textContent = "Login";
          menu.appendChild(login);
        } else {
          // Usuário logado
          const perfil = document.createElement("a");
          perfil.href = "/perfil";
          perfil.textContent = data.isAdmin ? "Controle" : "Meu Perfil";
          menu.appendChild(perfil);

          const logout = document.createElement("a");
          logout.href = "/logout";
          logout.textContent = "Sair";
          menu.appendChild(logout);
        }
      });
  </script>
</body>
</html>
